!function(){"use strict";var t="undefined"==typeof window?global:window;if("function"!=typeof t.require){var e={},r={},n={}.hasOwnProperty,a={},i=function(t,e){var r=0;e&&(e.indexOf(!1)&&(r="components/".length),e.indexOf("/",r)>0&&(e=e.substring(r,e.indexOf("/",r))));var n=a[t+"/index.js"]||a[e+"/deps/"+t+"/index.js"];return n?"components/"+n.substring(0,n.length-".js".length):t},l=function(){var t=/^\.\.?(\/|$)/;return function(e,r){var n,a,i=[];n=(t.test(r)?e+"/"+r:r).split("/");for(var l=0,o=n.length;o>l;l++)a=n[l],".."===a?i.pop():"."!==a&&""!==a&&i.push(a);return i.join("/")}}(),o=function(t){return t.split("/").slice(0,-1).join("/")},s=function(e){return function(r){var n=l(o(e),r);return t.require(n,e)}},u=function(t,e){var n={id:t,exports:{}};return r[t]=n,e(n.exports,s(t),n),n.exports},c=function(t,a){var o=l(t,".");if(null==a&&(a="/"),o=i(t,a),n.call(r,o))return r[o].exports;if(n.call(e,o))return u(o,e[o]);var s=l(o,"./index");if(n.call(r,s))return r[s].exports;if(n.call(e,s))return u(s,e[s]);throw new Error('Cannot find module "'+t+'" from "'+a+'"')};c.alias=function(t,e){a[e]=t},c.register=c.define=function(t,r){if("object"==typeof t)for(var a in t)n.call(t,a)&&(e[a]=t[a]);else e[t]=r},c.list=function(){var t=[];for(var r in e)n.call(e,r)&&t.push(r);return t},c.brunch=!0,t.require=c}}(),require.register("application",function(t,e,r){"use strict";var n="data/data.csv",a={items:["Home","About","Contact"],init:function(){var t=e("views/nav"),r=t({items:a.items});$("body").append(r);var i=e("views/charts");$("body").append(i),e("charts").init(n)}};r.exports=a}),require.register("charts",function(t,e,r){t.init=function(t){function r(t,r){data=e("dataparse").parse(r),nodes=data[0],links=data[1],ndxLinks=crossfilter(links),legalNameDim=ndxLinks.dimension(function(t){return nodes[+t.source].name}),mediaNameDim=ndxLinks.dimension(function(t){return nodes[+t.target].name}),text_filter=function(t,e,r){r.filterAll();var n=new RegExp(e,"i");""!=e?t.filter(function(t){return 0==t.search(n)}):t.filterAll(),dc.redrawAll()},all=ndxLinks.groupAll(),e("filterCharts"),e("tables"),dc.renderAll()}var n=queue().defer(d3.dsv(";","text/csv"),t);yearsChart=dc.pieChart("#years-chart"),quarterChart=dc.pieChart("#quarter-chart"),lawsChart=dc.pieChart("#laws-chart"),legalCount=dc.dataCount("#data-count-legal"),legalTable=dc.dataTable("#legal-table"),mediaTable=dc.dataTable("#media-table"),mediaCount=dc.dataCount("#data-count-media"),locale=d3.locale({decimal:",",thousands:".",grouping:[3],currency:["","€"],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),formatEuro=locale.numberFormat("$,.2f"),n.await(r)}}),require.register("dataparse",function(t,e,r){"use strict";t.parse=function(t){var e=[],r=[];return t.forEach(function(t){if(0==+t.LEERMELDUNG){var n=-1,a=-1;t.EURO=parseFloat(t.EURO.replace(",","."));for(var i=0;(-1==n||-1==a)&&i<e.length;i++){if(t.EURO>1e7)return;e[i].name==t.RECHTSTRGER&&(n=i,e[i].overall=e[i].overall+t.EURO),e[i].name==t.MEDIUM_MEDIENINHABER&&(a=i,e[i].overall=e[i].overall+t.EURO)}-1==n&&(e.push({name:t.RECHTSTRGER,overall:t.EURO,gov:1}),n=e.length-1),-1==a&&(e.push({name:t.MEDIUM_MEDIENINHABER,overall:t.EURO,gov:0}),a=e.length-1),r.push({source:n,target:a,quarter:+t.QUARTAL.substring(4),year:+t.QUARTAL.substring(0,4),law:+t.BEKANNTGABE,euro:t.EURO})}}),[e,r]}}),require.register("filterCharts",function(t,e,r){"use strict";var n=ndxLinks.dimension(function(t){return+t.year}),a=ndxLinks.dimension(function(t){return+t.quarter}),i=ndxLinks.dimension(function(t){return+t.law}),l=n.group().reduceSum(function(t){return+t.euro}),o=a.group().reduceSum(function(t){return+t.euro}),s=i.group().reduceSum(function(t){return+t.euro});yearsChart.width(180).height(180).radius(80).dimension(n).group(l).label(function(t){var e=t.key;if(yearsChart.hasFilter()&&!yearsChart.hasFilter(t.key))return e+"(0%)";var r=d3.sum(l.all(),function(t){return t.value});return r&&(e+="("+Math.floor(t.value/r*100)+"%)"),e}),quarterChart.width(180).height(180).radius(80).dimension(a).group(o).label(function(t){var e=t.key;if(quarterChart.hasFilter()&&!quarterChart.hasFilter(t.key))return e+"(0%)";var r=d3.sum(o.all(),function(t){return t.value});return r&&(e+="("+Math.floor(t.value/r*100)+"%)"),e}),lawsChart.width(180).height(180).radius(80).dimension(i).group(s).label(function(t){var e=t.key;if(lawsChart.hasFilter()&&!lawsChart.hasFilter(t.key))return e+"(0%)";var r=d3.sum(s.all(),function(t){return t.value});return r&&(e+="("+Math.floor(t.value/r*100)+"%)"),e})}),require.register("multiBarChart",function(t,e,r){dc.multiGroupMixin=function(t){return t._groups=new Array,t._groupGap=5,t.groups=function(e){return arguments.length?(t._groups=e,t.expireCache(),t):t._groups},t.groupGap=function(e){return arguments.length?(t._groupGap=e,t):t._groupGap},t.legendables=function(){var e=new Array;return t.groups().forEach(function(r,n){var a={chart:t,name:r.title,hidden:!1,color:t.colors()(n)};e.push(a)}),e},t},dc.multiBarChart=function(t,e){function r(){var t=0,e=d.groups();t=d3.max(e,function(t,e){return d3.max(t.dimgroup.all(),function(t,e){return 5.5*d._labelFormatter(t.valueAccessor(t)).length})}),p=t}function n(t){return dc.utils.safeNumber(Math.abs(d.y()(t.y+t.y0)-d.y()(t.y0)))}function a(t){var e=0,r="out",n=(d.y().range()[0],d.y()(t.y+t.y0));return 15>n?(e=n+15,r="in"):e=n-5,e=dc.utils.safeNumber(e),{y:e,p:r}}function i(t,e,r){var i=t.selectAll("g.bargr").data(r.data),l=i.enter().append("g").attr("class","bargr");if(l.append("rect").attr("class","bar").attr("fill",function(t){return d.colors()(e)}).attr("height",0).attr("width",u).attr("x",function(t){var r;return r=d.x()(t.x)+d.groupGap()/2,r+=e*(u+f),r+=f/2,dc.utils.safeNumber(r)}).attr("y",function(t){return d.y()(0)}),d.renderTitle(),d.isOrdinal()&&i.on("click",o),dc.transition(i.selectAll("rect.bar"),d.transitionDuration()).attr("y",function(t){var e=d.y()(t.y+t.y0);return t.y<0&&(e-=n(t)),dc.utils.safeNumber(e)}).attr("height",function(t){return n(t)}),dc.transition(i.exit(),d.transitionDuration()).attr("height",function(t){return 0}).remove(),d.barLabels()&&u>=p){l.append("text").attr("class","bar-label").attr("text-anchor","middle").attr("y",function(t){return d.y()(0)}).attr("data-prevvalue",function(t){return t.valueAccessor(t)});var s=t.selectAll("text.bar-label").data(r.data).text(function(t){var e=Math.abs(t.valueAccessor(t)),r=d._labelFormatter(e);return r});dc.transition(s,d.transitionDuration()).attr("x",function(t){var r=d.x()(t.x);return d.isOrdinal()&&(r+=u/2,r+=.5*d.groupGap()+.5*f,r+=e*(u+f)),dc.utils.safeNumber(r)}).attr("y",function(t){return a(t).y}).style("fill",function(t){return"in"==a(t).p?"white":"out"==a(t).p?"#3d3d3d":void 0}).tween("text",function(t){var e,r,n;return e=d3.select(this).attr("data-prevvalue"),r=t.valueAccessor(t),n=d3.interpolate(e,r),function(t){this.textContent=d._labelFormatter(n(t))}}).each("end",function(t){d3.select(this).attr("data-prevvalue",function(t){return t.valueAccessor(t)})})}}function l(){if(void 0===u){d.xUnitCount()*d.groups().length;u=(d.x().rangeBand()-d.groupGap())/d.groups().length-f}}function o(t){d.onClick(t)}function s(t,e){return function(){var r=d3.select(this),n=r.attr("fill")==t;return e?!n:n}}var u,c=2,d=dc.multiGroupMixin(dc.stackMixin(dc.coordinateGridMixin({}))),f=c,h=!1,g=!1,p=0;return dc.override(d,"rescale",function(){d._rescale(),u=void 0}),d._labelFormatter=function(t){return t},d._barLabels=!1,dc.override(d,"render",function(){d.round()&&h&&!g&&dc.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),d._render()}),d.plotData=function(){var t=new Array;d.groups().forEach(function(e,r){var n={};n.data=e.dimgroup.all(),n.data.forEach(function(t,r){t.valueAccessor=e.accessor,t.x=d.keyAccessor()(t),t.y=t.valueAccessor(t),t.y0=0}),t.push(n)});var e=d.chartBodyG().selectAll("g.series").data(t);l(),r(),e.enter().append("g").attr("class",function(t,e){return"series _"+e}),e.each(function(t,e){var r=d3.select(this);i(r,e,t)})},d.fadeDeselectedArea=function(){var t=d.chartBodyG().selectAll("rect.bar"),e=d.brush().extent();if(d.isOrdinal())d.hasFilter()?(t.classed(dc.constants.SELECTED_CLASS,function(t){return d.hasFilter(t.x)}),t.classed(dc.constants.DESELECTED_CLASS,function(t){return!d.hasFilter(t.x)})):(t.classed(dc.constants.SELECTED_CLASS,!1),t.classed(dc.constants.DESELECTED_CLASS,!1));else if(d.brushIsEmpty(e))t.classed(dc.constants.DESELECTED_CLASS,!1);else{var r=e[0],n=e[1];t.classed(dc.constants.DESELECTED_CLASS,function(t){return t.x<r||t.x>=n})}},d.centerBar=function(t){return arguments.length?(h=t,d):h},d.barPadding=function(t){return arguments.length?(d._rangeBandPadding(t),f=0,d):d._rangeBandPadding()},d.outerPadding=d._outerRangeBandPadding,d.gap=function(t){return arguments.length?(f=t,d):f},d.extendBrush=function(){var t=d.brush().extent();return!d.round()||h&&!g||(t[0]=t.map(d.round())[0],t[1]=t.map(d.round())[1],d.chartBodyG().select(".brush").call(d.brush().extent(t))),t},d.alwaysUseRounding=function(t){return arguments.length?(g=t,d):g},d.barLabels=function(t){return arguments.length?(d._barLabels=t,d):d._barLabels},d.labelFormatter=function(t){return arguments.length?(d._labelFormatter=t,d):d._labelFormatter},d.legendHighlight=function(t){d.isLegendableHidden(t)||d.g().selectAll("rect.bar").classed("highlight",s(t.color)).classed("fadeout",s(t.color,!0))},d.legendReset=function(){d.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},d.yAxisMax=function(){var t=d3.max(d.groups(),function(t){var e=d3.max(t.dimgroup.all(),function(e){return t.accessor(e)});return e});return t},dc.override(d,"xAxisMax",function(){var t=this._xAxisMax();if("resolution"in d.xUnits()){var e=d.xUnits().resolution;t+=e}return t}),d.anchor(t,e)},dc.multiRowChart=function(t,e){function r(){if(!m||b){var t=d3.max(R.groups(),function(t){var e=d3.max(t.dimgroup.all(),function(e){return t.accessor(e)});return e});m=d3.scale.linear().domain([0,t]).range([0,R.effectiveWidth()])}T.scale(m)}function n(t){var e=-1,r=new Array;return R.dimension().group().all().forEach(function(t,e){r.push(5.5*R._titleLabelFormatter(t.value).length)}),e=d3.max(r)}function a(){var t=x.length*R.dimension().group().all().length,e=0;return L?e=L:(e=R.effectiveHeight()/t,e*=1-R.groupGap(),e*=1-R.gap()),e}function i(){var t=v.select("g.axis");r(),t.empty()&&(t=v.append("g").attr("class","axis").attr("transform","translate(0, "+R.effectiveHeight()+")")),dc.transition(t,R.transitionDuration()).call(T)}function l(){v.selectAll("g.tick").select("line.grid-line").remove(),v.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-R.effectiveHeight()})}function o(){x=R.groups();var t=R.dimension().group().all(),e=v.selectAll("g."+_).data(t);i(),l(),s(e),c(e),d(e)}function s(t){var e=t.enter().append("g").attr("class",function(t,e){return _+" _"+e});t.each(function(t,e){var r=d3.select(this);r.attr("transform",function(t,r){var n=R.effectiveHeight()/R.dimension().group().all().length,a=e*n+.5*R.groupGap()*n;return"translate(0, "+a+")"}),u(r,e)}),f(e),h(e)}function u(t,e){var r=Array(),n=a();x.forEach(function(t,n){var a={};a.accessor=t.accessor,a.data=t.dimgroup.all()[e],r.push(a)});var i=t.selectAll("g."+M).data(r),l=i.enter();l.append("g").attr("class",function(t,e){return M+" _"+e}).on("click",g).append("rect").attr("class","row-bar").attr("width",0).attr("y",function(t,e){return n*(1+R.gap())*e}).attr("height",n).attr("fill",function(t,e){return R.colors()(e)})}function c(t){t.exit().remove()}function d(t){var e=v.selectAll("rect.row-bar").classed("deselected",function(t){return R.hasFilter()?!p(t):!1}).classed("selected",function(t){return R.hasFilter()?p(t):!1});dc.transition(e,R.transitionDuration()).attr("width",function(t){var e=m(m(0)==-(1/0)?1:0);return Math.abs(e-m(t.accessor(t.data)))})}function f(t){var e=a();R.renderLabel()&&t.append("text").attr("class",function(t,e){return M+" row-label _"+e}).attr("text-anchor","end").attr("x",-y).text(function(t){return R.label()(t)}),R.renderTitleLabel()&&e>=10&&t.selectAll("g.row").append("text").attr("class",function(t,e){return F+" _"+e}).text("0").attr("text-anchor","start").attr("data-prevvalue",function(t){return t.accessor(t.data)}).attr("x",y).on("click",function(){console.log(this)})}function h(){var t=R.selectAll(".row-group")[0],e=v.selectAll("g.row"),r=a();if(R.renderLabel()&&t.forEach(function(t,e){d3.select(t).selectAll(".row-label").attr("y",function(){var t=r/2*x.length+this.getBBox().height/2-2.5;return t})}),R.renderTitleLabel()&&r>=10){var i=e.select("text.value-label").text(function(t,e){return R.titleLabelFormatter()(t.accessor(t.data))});t.forEach(function(t,e){var n=d3.select(t).selectAll("g.row");n[0].forEach(function(t,e){var n=d3.select(t).select("text");n.attr("y",function(){return e*r*(1+C)+(r+this.getBBox().height)/2-2.5})})}),dc.transition(i,R.transitionDuration()).attr("x",function(t){var e=R.x()(R.valueAccessor()(t.data))+y;return e=d3.max([y,e]),e=d3.min([R.effectiveWidth()-n(x)-y,e])}).tween("text",function(t){var e,r,n;return e=d3.select(this).attr("data-prevvalue"),r=R.valueAccessor()(t.data),n=d3.interpolate(e,r),function(t){this.textContent=R.titleLabelFormatter()(n(t))}}).each("end",function(t){d3.select(this).attr("data-prevvalue",function(t){return t.accessor(t.data)})})}}function g(t){R.onClick(t.data)}function p(t){return R.hasFilter(R.cappedKeyAccessor(t.data))}var v,m,b,x,y=10,A=15,w=!1,E=2,C=.02,L=!1,_="row-group",M="row",F="value-label",S=!1,R=dc.multiGroupMixin(dc.capMixin(dc.marginMixin(dc.colorMixin(dc.baseMixin({}))))),T=d3.svg.axis().orient("bottom");return R.rowsCap=R.cap,R._titleLabelFormatter=function(t){return t},R._doRender=function(){return R.resetSvg(),v=R.svg().append("g").attr("transform","translate("+R.margins().left+","+R.margins().top+")"),o(),R},R.title(function(t){return R.cappedKeyAccessor(t)+": "+R.cappedValueAccessor(t)}),R.label(R.cappedKeyAccessor),R.x=function(t){return arguments.length?(m=t,R):m},R.renderTitleLabel=function(t){return arguments.length?(S=t,R):S},R.titleLabelFormatter=function(t){return arguments.length?(R._titleLabelFormatter=t,R):R._titleLabelFormatter},R._doRedraw=function(){return o(),R},R.xAxis=function(){return T},R.fixedBarHeight=function(t){return arguments.length?(L=t,R):L},R.fixedBarHeight=function(t){return arguments.length?(L=t,R):L},R.gap=function(t){return arguments.length?(C=t,R):C},R.elasticX=function(t){return arguments.length?(b=t,R):b},R.labelOffsetX=function(t){return arguments.length?(y=t,R):y},R.labelOffsetY=function(t){return arguments.length?(A=t,R):A},R.labelCenterY=function(t){return arguments.length?(w=t,R):w},R.titleLabelOffsetX=function(t){return arguments.length?(E=t,R):E},R.anchor(t,e)}}),require.register("tables",function(t,e,r){"use strict";function n(t){return{all:function(){return t.all().filter(function(t){return 0!=t.value.count})},top:function(e){return t.top(e).filter(function(t){return 0!=t.value.count})},size:function(){var e=t.all().filter(function(t){return 0!=t.value.count});return e.length}}}var a=ndxLinks.dimension(function(t){return+t.source}),i=ndxLinks.dimension(function(t){return+t.target}),l=function(t,e){return++t.count,t.total+=+e.euro,t},o=function(t,e){return--t.count,t.total-=+e.euro,t},s=function(){return{count:0,total:0}},u=n(a.group().reduce(l,o,s)),c=n(i.group().reduce(l,o,s)),d=function(t){return"source"};legalCount.dimension(u).group(all).html({some:"<strong>%total-count</strong> entries | <a href='javascript:dc.filterAll(); dc.renderAll();''>Reset All</a>",all:"All records selected. Please click on the graph to apply filters."}),mediaCount.dimension(c).group(all).html({some:"<strong>%total-count</strong> entries | <a href='javascript:dc.filterAll(); dc.renderAll();''>Reset All</a>",all:"All records selected. Please click on the graph to apply filters."}),legalTable.dimension(u).group(d).sortBy(function(t){return t.value.total}).order(d3.descending).showGroups(!1).size(1/0).columns([{label:"Rechtsträger",format:function(t){return nodes[t.key].name}},{label:"Anzahl an Relationen",format:function(t){return t.value.count}},{label:"Summe",format:function(t){return formatEuro(t.value.total)}}]).on("renderlet",function(t){t.selectAll("#legal-table").classed("info",!0)}),mediaTable.dimension(c).group(d).showGroups(!1).sortBy(function(t){return t.value.total}).order(d3.descending).size(1/0).columns([{label:"Media",format:function(t){return nodes[t.key].name}},{label:"Anzahl an Relationen",format:function(t){return t.value.count}},{label:"Summe",format:function(t){return formatEuro(t.value.total)}}]).on("renderlet",function(t){t.selectAll("#media-table").classed("info",!0)})}),require.register("views/charts",function(t,e,r){var n=function(t){var e=[];return e.push('<div class="container"><div class="starter-template"><h1>Media Transperancy<br/><small>An Overview of Public Money spent on Media-Cooperations and -Funding in Austria</small></h1><div class="row"><h2>Filter</h2><div id="years-chart" class="col-sm-4"><strong>Years </strong><a href="javascript:yearsChart.filterAll();dc.redrawAll();" style="display: none;" class="reset">reset</a><div class="clearfix"></div></div><div id="quarter-chart" class="col-sm-4"><strong>Quarters </strong><a href="javascript:quarterChart.filterAll();dc.redrawAll();" style="display: none;" class="reset">reset</a><div class="clearfix"> </div></div><div id="laws-chart" class="col-sm-4"><strong>Laws </strong><a href="javascript:lawsChart.filterAll();dc.redrawAll();" style="display: none;" class="reset">reset</a><div class="clearfix"></div></div></div><div class="row"><div class="col-sm-6"><div class="row"><div class="span12"><form class="custom-search-form search-form form-horizontal pull-right"><div class="input-append span12"><input type="text" placeholder="Filter" id="legalSearch" class="search-query mac-style"/><button type="submit" class="btn"><i class="icon-search"></i></button></div></form></div></div><span id="data-count-legal"></span><table id="legal-table" class="table table-hover"></table></div><div class="col-sm-6"><div class="row"><div class="span12"><form class="custom-search-form search-form form-horizontal pull-right"><div class="input-append span12"><input type="text" placeholder="Filter" id="mediaSearch" class="search-query mac-style"/><button type="submit" class="btn"><i class="icon-search"></i></button></div></form></div></div><span id="data-count-media"></span><table id="media-table" class="table table-hover"></table></div></div></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)}),require.register("views/nav",function(t,e,r){var n=function(t){var e=[];return e.push('<!-- Fixed navbar--><div role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="#" class="navbar-brand">Media Transperancy</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class="active"><a href="#">Home</a></li><li><a href="#about">About</a></li><li><a href="#contact">Contact</a></li></ul></div><!-- /.nav-collapse--></div></div>'),e.join("")};"function"==typeof define&&define.amd?define([],function(){return n}):"object"==typeof r&&r&&r.exports&&(r.exports=n)});