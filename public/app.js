!function(){"use strict";var e="undefined"==typeof window?global:window;if("function"!=typeof e.require){var t={},r={},a={}.hasOwnProperty,n={},i=function(e,t){var r=0;t&&(t.indexOf(!1)&&(r="components/".length),t.indexOf("/",r)>0&&(t=t.substring(r,t.indexOf("/",r))));var a=n[e+"/index.js"]||n[t+"/deps/"+e+"/index.js"];return a?"components/"+a.substring(0,a.length-".js".length):e},l=function(){var e=/^\.\.?(\/|$)/;return function(t,r){var a,n,i=[];a=(e.test(r)?t+"/"+r:r).split("/");for(var l=0,o=a.length;o>l;l++)n=a[l],".."===n?i.pop():"."!==n&&""!==n&&i.push(n);return i.join("/")}}(),o=function(e){return e.split("/").slice(0,-1).join("/")},s=function(t){return function(r){var a=l(o(t),r);return e.require(a,t)}},c=function(e,t){var a={id:e,exports:{}};return r[e]=a,t(a.exports,s(e),a),a.exports},u=function(e,n){var o=l(e,".");if(null==n&&(n="/"),o=i(e,n),a.call(r,o))return r[o].exports;if(a.call(t,o))return c(o,t[o]);var s=l(o,"./index");if(a.call(r,s))return r[s].exports;if(a.call(t,s))return c(s,t[s]);throw new Error('Cannot find module "'+e+'" from "'+n+'"')};u.alias=function(e,t){n[t]=e},u.register=u.define=function(e,r){if("object"==typeof e)for(var n in e)a.call(e,n)&&(t[n]=e[n]);else t[e]=r},u.list=function(){var e=[];for(var r in t)a.call(t,r)&&e.push(r);return e},u.brunch=!0,e.require=u}}(),require.register("application",function(e,t,r){"use strict";var a="data/data.csv";t("globalFunctions");var n={init:function(){var e=t("views/nav");$("body").prepend(e);var r=t("views/charts");$(".starter-template").append(r),t("charts").init(a)}};r.exports=n}),require.register("charts",function(e,t,r){e.init=function(e){function r(e,r){function a(e,t){var r=t.children().first();r.removeClass(),r.addClass("glyphicon "+legalTableSortingStatus[legalTableSorting]),e.order(legalTableOrdering[legalTableSorting]).sortBy(tableSorting[legalTableSorting]).redraw()}function n(e,t){var r=t.children().first();r.removeClass(),r.addClass("glyphicon "+mediaTableSortingStatus[mediaTableSorting]),e.order(mediaTableOrdering[mediaTableSorting]).sortBy(tableSorting[mediaTableSorting]).redraw()}data=t("dataparse").parse(r),nodes=data[0],links=data[1],ndxLinks=crossfilter(links),binwidth=1e3;var i=function(e){return Math.abs(e.value)>1e-6},l=function(e){return Math.abs(e.value.total)>1e-6};legalDim=ndxLinks.dimension(function(e){return+e.source}),legalDim2=ndxLinks.dimension(function(e){return+e.source}),legalDim3=ndxLinks.dimension(function(e){return+e.source}),mediaDim=ndxLinks.dimension(function(e){return+e.target}),mediaDim2=ndxLinks.dimension(function(e){return+e.target}),lawsDim=ndxLinks.dimension(function(e){return+e.law}),timeDim=ndxLinks.dimension(function(e){return 10*+e.year+e.quarter}),spendDim=ndxLinks.dimension(function(e){return Math.floor(+e.euro/binwidth)}),spendPerTime=remove_empty_bins(timeDim.group().reduceSum(function(e){return+e.euro}),i),spendPerLaw=remove_empty_bins(lawsDim.group().reduceSum(function(e){return+e.euro}),i),spendGroup=remove_empty_bins(spendDim.group().reduceCount(function(e){return+e.euro}),i),groupedLegalDim=remove_empty_bins(legalDim.group().reduce(addTotal,removeTotal,initTotal),l),groupedMediaDim=remove_empty_bins(mediaDim.group().reduce(addTotal,removeTotal,initTotal),l),t("filterCharts"),t("chordChart"),t("tables"),dc.renderAll(),dc.tooltipMixin(timeBarChart),dc.tooltipMixin(lawsBarChart),$("#dataLoading").hide(),$("#my-charts").show(),$("#legalSearchReset").hide(),$("#mediaSearchReset").hide(),$("#legalSearch").on("change",function(){textFilter(legalDim2,this.value,legalTable)}),$("#legalSearchForm").submit(function(){return textFilter(legalDim2,$("#legalSearch").val(),legalTable),!1}),$("#legalSearch").on("change",function(){""!=this.value?$("#legalSearchReset").show():$("#legalSearchReset").hide()}),$("#mediaSearch").on("change",function(){textFilter(mediaDim2,this.value,mediaTable)}),$("#mediaSearchForm").submit(function(){return textFilter(mediaDim2,$("#mediaSearch").val(),mediaTable),!1}),$("#mediaSearch").on("change",function(){""!=this.value?$("#mediaSearchReset").show():$("#mediaSearchReset").hide()}),$("#legalAlphabetOrder").click(function(){legalTableSorting="alphabeth",legalTableOrdering[legalTableSorting]==d3.descending?(legalTableOrdering[legalTableSorting]=d3.ascending,legalTableSortingStatus[legalTableSorting]=ordinalAscendingGlyph):(legalTableOrdering[legalTableSorting]=d3.descending,legalTableSortingStatus[legalTableSorting]=ordinalDescendingGlyph),a(legalTable,$(this))}),$("#legalRelationOrder").click(function(){legalTableSorting="relation",legalTableOrdering[legalTableSorting]==d3.descending?(legalTableOrdering[legalTableSorting]=d3.ascending,legalTableSortingStatus[legalTableSorting]=numericAscendingGlyph):(legalTableOrdering[legalTableSorting]=d3.descending,legalTableSortingStatus[legalTableSorting]=numericDescendingGlyph),a(legalTable,$(this))}),$("#legalSumOrder").click(function(){legalTableSorting="sum",legalTableOrdering[legalTableSorting]==d3.descending?(legalTableOrdering[legalTableSorting]=d3.ascending,legalTableSortingStatus[legalTableSorting]=numericAscendingGlyph):(legalTableOrdering[legalTableSorting]=d3.descending,legalTableSortingStatus[legalTableSorting]=numericDescendingGlyph),a(legalTable,$(this))}),$("#mediaAlphabetOrder").click(function(){mediaTableSorting="alphabeth",mediaTableOrdering[mediaTableSorting]==d3.descending?(mediaTableOrdering[mediaTableSorting]=d3.ascending,mediaTableSortingStatus[mediaTableSorting]=ordinalAscendingGlyph):(mediaTableOrdering[mediaTableSorting]=d3.descending,mediaTableSortingStatus[mediaTableSorting]=ordinalDescendingGlyph),n(mediaTable,$(this))}),$("#mediaRelationOrder").click(function(){mediaTableSorting="relation",mediaTableOrdering[mediaTableSorting]==d3.descending?(mediaTableOrdering[mediaTableSorting]=d3.ascending,mediaTableSortingStatus[mediaTableSorting]=numericAscendingGlyph):(mediaTableOrdering[mediaTableSorting]=d3.descending,mediaTableSortingStatus[mediaTableSorting]=numericDescendingGlyph),n(mediaTable,$(this))}),$("#mediaSumOrder").click(function(){mediaTableSorting="sum",mediaTableOrdering[mediaTableSorting]==d3.descending?(mediaTableOrdering[mediaTableSorting]=d3.ascending,mediaTableSortingStatus[mediaTableSorting]=numericAscendingGlyph):(mediaTableOrdering[mediaTableSorting]=d3.descending,mediaTableSortingStatus[mediaTableSorting]=numericDescendingGlyph),n(mediaTable,$(this))}),$(window).on("resize",function(){rescaleAll(),updateAll()})}t("dc-tooltip-mixin"),$("#my-charts").hide();var a=queue().defer(d3.dsv(";","text/csv"),e);timeBarChart=dc.barChart("#time-bar-chart"),lawsBarChart=dc.barChart("#laws-bar-chart"),expensesBarChart=dc.barChart("#expenses-bar-chart"),legalCount=dc.dataCount("#data-count-legal"),mediaCount=dc.dataCount("#data-count-media"),legalTable=dc.dataTable("#legal-table"),mediaTable=dc.dataTable("#media-table"),a.await(r)}}),require.register("chordChart",function(e,t,r){var a=[800,800],n=[50,50,50,50],i=[];i[0]=a[0]-n[1]-n[3],i[1]=a[1]-n[0]-n[2];var l=d3.scale.ordinal().range(["#9C6744","#C9BEB9","#CFA07E","#C4BAA1","#C2B6BF","#121212","#8FB5AA","#85889E","#9C7989","#91919C","#242B27","#212429","#99677B","#36352B","#33332F","#2B2B2E","#2E1F13","#2B242A","#918A59","#6E676C","#6E4752","#6B4A2F","#998476","#8A968D","#968D8A","#968D96","#CC855C","#967860","#929488","#949278","#A0A3BD","#BD93A1","#65666B","#6B5745","#6B6664","#695C52","#56695E","#69545C","#565A69","#696043","#63635C","#636150","#333131","#332820","#302D30","#302D1F","#2D302F","#CFB6A3","#362F2A"]),o=d3.layout.chord().padding(.02).sortSubgroups(d3.ascending),s=t("matrixFactory").chordMatrix().layout(o).filter(function(e,t,r){return e.source===t.name&&e.target===r.name||e.source===r.name&&e.target===t.name}).reduce(function(e,t,r){var a;return a=e[0]?e.reduce(function(e,a){return t===r?e+a.euro:e+(a.source===t.name?a.euro:a.euro)},0):0,{value:a,data:e}}),c=i[1]/2-100,u=d3.svg.arc().innerRadius(c).outerRadius(c+20),d=d3.svg.chord().radius(c),g=d3.select("#chord-chart").append("svg").attr("class","chart").attr({width:a[0]+"px",height:a[1]+"px"}).attr("preserveAspectRatio","xMinYMin").attr("viewBox","0 0 "+a[0]+" "+a[1]),h=g.append("g").attr("class","container").attr("transform","translate("+(i[0]/2+n[3])+","+(i[1]/2+n[0])+")"),f=g.append("text").attr("class","messages").attr("transform","translate(10, 10)").text("Updating...");drawChords=function(e){function t(e){d3.event.preventDefault(),d3.event.stopPropagation(),i(e),console.log(s.read(e)),updateAll(),n()}function r(e){d3.event.preventDefault(),d3.event.stopPropagation(),i(e),d3.select("#tooltip").style("opacity",1)}function a(){d3.event.preventDefault(),d3.event.stopPropagation(),d3.select("#tooltip").style("opacity",0),n()}function n(){d3.event.preventDefault(),d3.event.stopPropagation(),h.selectAll("path.chord").style("opacity",.9)}function i(e){d3.event.preventDefault(),d3.event.stopPropagation(),h.selectAll("path.chord").style("opacity",function(t){return e.source?t._id===e._id?.9:.1:t.source._id===e._id||t.target._id===e._id?.9:.1})}var o=20,g=e.top(1/0).sort(function(e,t){return t.euro-e.euro}),p=g.slice(0,o);f.attr("opacity",1),f.transition().duration(1e3).attr("opacity",0),s.data(p).resetKeys().addKeys(["source","target"]).update();var m=h.selectAll("g.group").data(s.groups(),function(e){return+e._id}),b=m.enter().append("g").attr("class","group");b.append("path").style("pointer-events","none").style("fill",function(e){return l(e.index)}).attr("d",u),b.append("text").attr("dy",".35em").on("click",t).on("mouseover",i).on("mouseout",n).text(function(e){return nodes[e._id]}),m.select("path").transition().duration(2e3).attrTween("d",s.groupTween(u)),m.select("text").transition().duration(2e3).attr("transform",function(e){e.angle=(e.startAngle+e.endAngle)/2;var t="rotate("+(180*e.angle/Math.PI-90)+")",r=" translate("+(c+26)+")";return t+r+(e.angle>Math.PI?" rotate(180)":" rotate(0)")}).attr("text-anchor",function(e){return e.angle>Math.PI?"end":"begin"}),m.exit().select("text").attr("fill","orange"),m.exit().select("path").remove(),m.exit().transition().duration(1e3).style("opacity",0).remove();var v=h.selectAll("path.chord").data(s.chords(),function(e){return e._id});v.enter().append("path").attr("class","chord").style("fill",function(e){return l(e.source.index)}).attr("d",d).on("mouseover",r).on("mouseout",a),v.transition().duration(2e3).attrTween("d",s.chordTween(d)),v.exit().remove()},resizeChordChart=function(){var e=$("#chord-chart").width();g.attr({width:e,height:e/(a[0]/a[1])})},drawChords(legalDim3),resizeChordChart()}),require.register("d3graph",function(e,t,r){!function(e){e.graph=function(t){var t=t?t:{},r=[],a=[];return t.description=function(){return"d3.graph with "+r.length+" nodes and "+a.length+" links"},t.nodes=function(e){return arguments.length?(r=e,this):r},t.links=function(e){return arguments.length?(a=e,this):a},t.matrix=function(t){return arguments.length?(a=e.graph.matrixToList(t),this):e.graph.listToMatrix(a)},t},e.graph.matrix=function(e){var e=e?e:[],t=function(t,r){return e[t][r]};return t.description=function(){return"A "+e.length+" by "+e.length+" adjacency matrix"},t.data=t.matrix=function(t){return arguments.length?(e=t,this):e},t.set=t.addEdge=function(t,r,a){return e[t][r]=a?a:1,this},t.remove=t.removeEdge=function(t,r){return e[t][r]=0,this},t.has=t.hasEdge=function(t,r){return!!e[t][r]},t.outE=t.outEdges=function(t){for(var r=[],a=e.length,n=-1;++n<a;)e[t][n]&&r.push(n);return r},t.inE=t.inEdges=function(t){for(var r=[],a=e.length,n=-1;++n<a;)e[n][t]&&r.push(n);return r},t},e.graph.listToMatrix=function(t){for(var r=[],a=t.length,n=e.max(t,function(t){return e.max([t.source,t.target])}),i=-1;++i<=n;){r[i]=[];for(var l=-1;++l<=n;)r[i][l]=0}for(i=-1;++i<a;)r[t[i].source][t[i].target]=t[i].value;return r},e.graph.matrixToList=function(e){for(var t=[],r=e.length,a=-1;++a<r;)for(var n=-1;++n<r;)t.push({source:a,target:n,value:e[a][n]});return t}}(d3)}),require.register("dataparse",function(e,t,r){"use strict";e.parse=function(e){var t=[],r=[];return e.forEach(function(e){if(0==+e.LEERMELDUNG){var a=-1,n=-1;e.EURO=parseFloat(e.EURO.replace(",","."));for(var i=0;(-1==a||-1==n)&&i<t.length;i++){if(e.EURO>1e7)return;t[i]==e.RECHTSTRGER&&(a=i),t[i]==e.MEDIUM_MEDIENINHABER&&(n=i)}-1==a&&(t.push(e.RECHTSTRGER),a=t.length-1),-1==n&&(t.push(e.MEDIUM_MEDIENINHABER),n=t.length-1),r.push({source:a,target:n,quarter:+e.QUARTAL.substring(4),year:+e.QUARTAL.substring(0,4),law:+e.BEKANNTGABE,euro:e.EURO})}}),[t,r]}}),require.register("dc-tooltip-mixin",function(e,t,r){"use strict";dc.tooltipMixin||(dc.tooltipMixin=function(e){return e&&(e.tip=function(){var t="rect.bar,circle.dot,g.pie-slice path,circle.bubble,g.row rect",r=e.svg(),a=d3.tip().attr("class","tip").html(function(t){return t.data?e.title()(t.data):e.title()(t)});r.selectAll("rect.bar,circle.dot,g.pie-slice path,circle.bubble,g.row rect").call(a),r.selectAll(t).on("mouseover",a.show).on("mouseleave",a.hide),r.selectAll("title").remove()},e.tip()),e})}),require.register("dcTreeMapChart",function(e,t,r){dc.treemapChart=function(e,t){function r(){this.style("left",function(e){return e.x+"px"}).style("top",function(e){return e.y+"px"}).style("width",function(e){return e.dx-1+"px"}).style("height",function(e){return e.dy-1+"px"}).style("font-size",function(e){return e.value>0?.1*Math.sqrt(e.dx*e.dy)+"px":0})}function a(e,t){l.onClick(e,t)}function n(){l.hasFilter()?l.root().selectAll(".node").each(function(e){l.hasFilter(e.key)?l.highlightSelected(this):l.fadeDeselected(this)}):l.root().selectAll(".node").each(function(e){l.resetHighlight(this)})}var i,l=dc.capMixin(dc.marginMixin(dc.baseMixin({})));return l.rowsCap=l.cap,l._doRedraw=function(){({name:"tree",children:l.data()});return l.root().selectAll(".node").data(i.nodes).transition().duration(1e3).call(r),n(),l},l._doRender=function(){var e=d3.scale.category20c();i=d3.layout.treemap().size([l.width(),l.height()]).sticky(!0).value(function(e){return l.valueAccessor()(e)});var t={name:"tree",children:l.data()};l.root().classed("treemap",!0).style("position","relative").style("height",l.height()+"px").style("width",l.width()+"px");l.root().datum(t).selectAll(".node").data(i.nodes).enter().append("div").attr("class","node").call(r).style("background",function(t){return e(t.key)}).style("position","absolute").text(function(e){return l.keyAccessor()(e)}).attr("title",l.title()).on("click",a);return l},l.anchor(e,t)}}),require.register("filterCharts",function(e,t,r){"use strict";timeBarChart.width(function(){return $("#time-bar-chart").width()}).height(200).margins({top:10,right:10,bottom:30,left:80}).gap(10).dimension(timeDim).group(spendPerTime).renderHorizontalGridLines(!0).x(d3.scale.ordinal()).xUnits(dc.units.ordinal).elasticX(!0).elasticY(!0).colorAccessor(function(e,t){return Math.floor(e.key/10)}).title(function(e){return Math.floor(e.key/10)+" Q"+e.key%10+": "+formatEuro(e.value)}).on("filtered",function(e,t){updateAllNonDC()}),timeBarChart.yAxis().tickFormat(function(e){return formatGuV(e)}),timeBarChart.xAxis().tickFormat(function(e){return Math.floor(e/10)+"Q"+e%10}),lawsBarChart.width(function(){return $("#laws-bar-chart").width()}).height(200).margins({top:10,right:10,bottom:30,left:80}).gap(5).dimension(lawsDim).group(spendPerLaw).x(d3.scale.ordinal()).xUnits(dc.units.ordinal).elasticX(!0).elasticY(!0).renderHorizontalGridLines(!0).title(function(e){return formatEuro(e.value)}).on("filtered",function(e,t){updateAllNonDC()}),lawsBarChart.xAxis().tickFormat(function(e){return"§"+e}),lawsBarChart.yAxis().tickFormat(function(e){return formatGuV(e)}),expensesBarChart.width(function(){return $("#expenses-bar-chart").width()}).height(200).margins({top:10,right:10,bottom:60,left:40}).gap(2).dimension(spendDim).group(spendGroup).transitionDuration(500).round(dc.round.floor).alwaysUseRounding(!0).x(d3.scale.linear().domain([0,1])).elasticX(!0).elasticY(!0).renderHorizontalGridLines(!0).title(function(e){return formatEuro(e.value*binwidth)}).on("renderlet.d",function(e){e.selectAll("g.x text").attr("dx","-32").attr("dy","-7").attr("transform","rotate(-65)")}).on("filtered",function(e,t){updateAllNonDC()}),expensesBarChart.xAxis().tickFormat(function(e){return formatGuV(e*binwidth)})}),require.register("globalFunctions",function(e,t,r){locale=d3.locale({decimal:",",thousands:".",grouping:[3],currency:["","€"],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]}),formatEuro=locale.numberFormat("$,.2f"),formatBigEuro=locale.numberFormat("$,d");var a=locale.numberFormat(",d");formatGuV=function(e){var t=Math.floor(e/1e3),r=Math.floor(t/1e3);return r>0?a(r)+" Mil. €":t>0?a(t)+" Tsd.  €":formatBigEuro(e)},textFilter=function(e,t,r){var a=new RegExp(".*"+t,"i");""!=t?e.filterFunction(function(e){return 0==nodes[e].search(a)}):e.filterAll(),updateAll()},resetSearchBox=function(e){e.val(""),e.change(),updateAll()},updateAll=function(){updateAllNonDC(),dc.redrawAll()},updateAllNonDC=function(){drawChords(legalDim)},rescaleAll=function(){timeBarChart.rescale(),lawsBarChart.rescale(),expensesBarChart.rescale(),resizeChordChart()},deleteData=function(e){ndxLinks.remove(e),updateAll()},combineLegalData=function(){var e=[];legalDim.top(1/0).forEach(function(t){t.source=nodes.length,e.push(t)}),ndxLinks.remove(),nodes.push($("#legalSearch").val()),ndxLinks.add(e),updateAll()},combineMediaData=function(){var e=[];mediaDim.top(1/0).forEach(function(t){t.target=nodes.length,e.push(t)}),ndxLinks.remove(),nodes.push($("#mediaSearch").val()),ndxLinks.add(e),updateAll()},remove_empty_bins=function(e,t){return{all:function(){return e.all().filter(t)},top:function(r){return e.top(1/0).filter(t).slice(0,r)},bottom:function(r){return e.top(1/0).filter(t).slice(-r)},size:function(){return e.all().filter(t).length}}},addTotal=function(e,t){return++e.count,e.total+=+t.euro,e},removeTotal=function(e,t){return--e.count,e.total-=+t.euro,e},initTotal=function(){return{count:0,total:0}},numericAscendingGlyph="glyphicon-sort-by-order",numericDescendingGlyph="glyphicon-sort-by-order-alt",ordinalAscendingGlyph="glyphicon-sort-by-alphabet",ordinalDescendingGlyph="glyphicon-sort-by-alphabet-alt",legalTableSortingStatus={alphabeth:ordinalAscendingGlyph,relation:numericAscendingGlyph,sum:numericDescendingGlyph},mediaTableSortingStatus={alphabeth:ordinalAscendingGlyph,relation:numericAscendingGlyph,sum:numericDescendingGlyph},tableSorting={alphabeth:function(e){return nodes[e.key]},relation:function(e){return e.value.count},sum:function(e){return e.value.total}},legalTableSorting="sum",mediaTableSorting="sum",legalTableOrdering={alphabeth:d3.descending,relation:d3.descending,sum:d3.descending},mediaTableOrdering={alphabeth:d3.descending,relation:d3.descending,sum:d3.descending}}),require.register("matrixFactory",function(e,t,r){e.chordMatrix=function(){function e(e){var t=i[e.source.index],r=i[e.target.index];return r>t?t+"__"+r:r+"__"+t}var t,r,a=[],n=[],i=[],l={},o=function(){},s=function(){},c={};return c.update=function(){a=[],objs=[],entry={},r={groups:{},chords:{}},this.groups().forEach(function(e){r.groups[e._id]={startAngle:e.startAngle,endAngle:e.endAngle}}),this.chords().forEach(function(t){r.chords[e(t)]={source:{_id:t.source._id,startAngle:t.source.startAngle,endAngle:t.source.endAngle},target:{_id:t.target._id,startAngle:t.target.startAngle,endAngle:t.target.endAngle}}}),i=Object.keys(l);for(var c=0;c<i.length;c++){a[c]||(a[c]=[]);for(var u=0;u<i.length;u++)objs=n.filter(function(e){return o(e,l[i[c]],l[i[u]])}),entry=s(objs,l[i[c]],l[i[u]]),entry.valueOf=function(){return+this.value},a[c][u]=entry}return t.matrix(a),a},c.data=function(e){return n=e,this},c.filter=function(e){return o=e,this},c.reduce=function(e){return s=e,this},c.layout=function(e){return t=e,this},c.groups=function(){return t.groups().map(function(e){return e._id=i[e.index],e})},c.chords=function(){return t.chords().map(function(t){return t._id=e(t),t.source._id=i[t.source.index],t.target._id=i[t.target.index],t})},c.addKey=function(e,t){l[e]||(l[e]={name:e,data:t||{}})},c.addKeys=function(e,t){for(var r=0;r<n.length;r++)for(var a=0;a<e.length;a++)this.addKey(n[r][e[a]],t?t(n[r],e[a]):{});return this},c.resetKeys=function(){return l={},this},c.groupTween=function(e){return function(t,a){var n,i=r.groups[t._id];return n=i?d3.interpolateObject(i,t):d3.interpolateObject({startAngle:t.startAngle,endAngle:t.startAngle},t),function(t){return e(n(t))}}},c.chordTween=function(e){return function(t,a){var n,i,l=r.chords[t._id];if(l)t.source._id!==l.source._id&&(l={source:l.target,target:l.source}),n=d3.interpolateObject(l,t);else{if(r.groups){i=[];for(var o in r.groups)l=r.groups[o],(l._id===t.source._id||l._id===t.target._id)&&i.push(l);i.length>0?(l={source:i[0],target:i[1]||i[0]},t.source._id!==l.source._id&&(l={source:l.target,target:l.source})):l=t}else l=t;n=d3.interpolateObject({source:{startAngle:l.source.startAngle,endAngle:l.source.startAngle},target:{startAngle:l.target.startAngle,endAngle:l.target.startAngle}},t)}return function(t){return e(n(t))}}},c.read=function(e){var t,r={};return e.source?(r.sname=e.source._id,r.sdata=e.source.value,r.svalue=+e.source.value,r.stotal=a[e.source.index].reduce(function(e,t){return e+t},0),r.tname=e.target._id,r.tdata=e.target.value,r.tvalue=+e.target.value,r.ttotal=a[e.target.index].reduce(function(e,t){return e+t},0)):(t=l[e._id],r.gname=t.name,r.gdata=t.data,r.gvalue=e.value),r.mtotal=a.reduce(function(e,t){return e+t.reduce(function(e,t){return e+t},0)},0),r},c}}),require.register("multiBarChart",function(e,t,r){dc.multiGroupMixin=function(e){return e._groups=new Array,e._groupGap=5,e.groups=function(t){return arguments.length?(e._groups=t,e.expireCache(),e):e._groups},e.groupGap=function(t){return arguments.length?(e._groupGap=t,e):e._groupGap},e.legendables=function(){var t=new Array;return e.groups().forEach(function(r,a){var n={chart:e,name:r.title,hidden:!1,color:e.colors()(a)};t.push(n)}),t},e},dc.multiBarChart=function(e,t){function r(){var e=0,t=d.groups();e=d3.max(t,function(e,t){return d3.max(e.dimgroup.all(),function(e,t){return 5.5*d._labelFormatter(e.valueAccessor(e)).length})}),p=e}function a(e){return dc.utils.safeNumber(Math.abs(d.y()(e.y+e.y0)-d.y()(e.y0)))}function n(e){var t=0,r="out",a=(d.y().range()[0],d.y()(e.y+e.y0));return 15>a?(t=a+15,r="in"):t=a-5,t=dc.utils.safeNumber(t),{y:t,p:r}}function i(e,t,r){var i=e.selectAll("g.bargr").data(r.data),l=i.enter().append("g").attr("class","bargr");if(l.append("rect").attr("class","bar").attr("fill",function(e){return d.colors()(t)}).attr("height",0).attr("width",c).attr("x",function(e){var r;return r=d.x()(e.x)+d.groupGap()/2,r+=t*(c+g),r+=g/2,dc.utils.safeNumber(r)}).attr("y",function(e){return d.y()(0)}),d.renderTitle(),d.isOrdinal()&&i.on("click",o),dc.transition(i.selectAll("rect.bar"),d.transitionDuration()).attr("y",function(e){var t=d.y()(e.y+e.y0);return e.y<0&&(t-=a(e)),dc.utils.safeNumber(t)}).attr("height",function(e){return a(e)}),dc.transition(i.exit(),d.transitionDuration()).attr("height",function(e){return 0}).remove(),d.barLabels()&&c>=p){l.append("text").attr("class","bar-label").attr("text-anchor","middle").attr("y",function(e){return d.y()(0)}).attr("data-prevvalue",function(e){return e.valueAccessor(e)});var s=e.selectAll("text.bar-label").data(r.data).text(function(e){var t=Math.abs(e.valueAccessor(e)),r=d._labelFormatter(t);return r});dc.transition(s,d.transitionDuration()).attr("x",function(e){var r=d.x()(e.x);return d.isOrdinal()&&(r+=c/2,r+=.5*d.groupGap()+.5*g,r+=t*(c+g)),dc.utils.safeNumber(r)}).attr("y",function(e){return n(e).y}).style("fill",function(e){return"in"==n(e).p?"white":"out"==n(e).p?"#3d3d3d":void 0}).tween("text",function(e){var t,r,a;return t=d3.select(this).attr("data-prevvalue"),r=e.valueAccessor(e),a=d3.interpolate(t,r),function(e){this.textContent=d._labelFormatter(a(e))}}).each("end",function(e){d3.select(this).attr("data-prevvalue",function(e){return e.valueAccessor(e)})})}}function l(){if(void 0===c){d.xUnitCount()*d.groups().length;c=(d.x().rangeBand()-d.groupGap())/d.groups().length-g}}function o(e){d.onClick(e)}function s(e,t){return function(){var r=d3.select(this),a=r.attr("fill")==e;return t?!a:a}}var c,u=2,d=dc.multiGroupMixin(dc.stackMixin(dc.coordinateGridMixin({}))),g=u,h=!1,f=!1,p=0;return dc.override(d,"rescale",function(){d._rescale(),c=void 0}),d._labelFormatter=function(e){return e},d._barLabels=!1,dc.override(d,"render",function(){d.round()&&h&&!f&&dc.logger.warn("By default, brush rounding is disabled if bars are centered. See dc.js bar chart API documentation for details."),d._render()}),d.plotData=function(){var e=new Array;d.groups().forEach(function(t,r){var a={};a.data=t.dimgroup.all(),a.data.forEach(function(e,r){e.valueAccessor=t.accessor,e.x=d.keyAccessor()(e),e.y=e.valueAccessor(e),e.y0=0}),e.push(a)});var t=d.chartBodyG().selectAll("g.series").data(e);l(),r(),t.enter().append("g").attr("class",function(e,t){return"series _"+t}),t.each(function(e,t){var r=d3.select(this);i(r,t,e)})},d.fadeDeselectedArea=function(){var e=d.chartBodyG().selectAll("rect.bar"),t=d.brush().extent();if(d.isOrdinal())d.hasFilter()?(e.classed(dc.constants.SELECTED_CLASS,function(e){return d.hasFilter(e.x)}),e.classed(dc.constants.DESELECTED_CLASS,function(e){return!d.hasFilter(e.x)})):(e.classed(dc.constants.SELECTED_CLASS,!1),e.classed(dc.constants.DESELECTED_CLASS,!1));else if(d.brushIsEmpty(t))e.classed(dc.constants.DESELECTED_CLASS,!1);else{var r=t[0],a=t[1];e.classed(dc.constants.DESELECTED_CLASS,function(e){return e.x<r||e.x>=a})}},d.centerBar=function(e){return arguments.length?(h=e,d):h},d.barPadding=function(e){return arguments.length?(d._rangeBandPadding(e),g=0,d):d._rangeBandPadding()},d.outerPadding=d._outerRangeBandPadding,d.gap=function(e){return arguments.length?(g=e,d):g},d.extendBrush=function(){var e=d.brush().extent();return!d.round()||h&&!f||(e[0]=e.map(d.round())[0],e[1]=e.map(d.round())[1],d.chartBodyG().select(".brush").call(d.brush().extent(e))),e},d.alwaysUseRounding=function(e){return arguments.length?(f=e,d):f},d.barLabels=function(e){return arguments.length?(d._barLabels=e,d):d._barLabels},d.labelFormatter=function(e){return arguments.length?(d._labelFormatter=e,d):d._labelFormatter},d.legendHighlight=function(e){d.isLegendableHidden(e)||d.g().selectAll("rect.bar").classed("highlight",s(e.color)).classed("fadeout",s(e.color,!0))},d.legendReset=function(){d.g().selectAll("rect.bar").classed("highlight",!1).classed("fadeout",!1)},d.yAxisMax=function(){var e=d3.max(d.groups(),function(e){var t=d3.max(e.dimgroup.all(),function(t){return e.accessor(t)});return t});return e},dc.override(d,"xAxisMax",function(){var e=this._xAxisMax();if("resolution"in d.xUnits()){var t=d.xUnits().resolution;e+=t}return e}),d.anchor(e,t)},dc.multiRowChart=function(e,t){function r(){if(!b||v){var e=d3.max(B.groups(),function(e){var t=d3.max(e.dimgroup.all(),function(t){return e.accessor(t)});return t});b=d3.scale.linear().domain([0,e]).range([0,B.effectiveWidth()])}F.scale(b)}function a(e){var t=-1,r=new Array;return B.dimension().group().all().forEach(function(e,t){r.push(5.5*B._titleLabelFormatter(e.value).length)}),t=d3.max(r)}function n(){var e=y.length*B.dimension().group().all().length,t=0;return C?t=C:(t=B.effectiveHeight()/e,t*=1-B.groupGap(),t*=1-B.gap()),t}function i(){var e=m.select("g.axis");r(),e.empty()&&(e=m.append("g").attr("class","axis").attr("transform","translate(0, "+B.effectiveHeight()+")")),dc.transition(e,B.transitionDuration()).call(F)}function l(){m.selectAll("g.tick").select("line.grid-line").remove(),m.selectAll("g.tick").append("line").attr("class","grid-line").attr("x1",0).attr("y1",0).attr("x2",0).attr("y2",function(){return-B.effectiveHeight()})}function o(){y=B.groups();var e=B.dimension().group().all(),t=m.selectAll("g."+D).data(e);i(),l(),s(t),u(t),d(t)}function s(e){var t=e.enter().append("g").attr("class",function(e,t){return D+" _"+t});e.each(function(e,t){var r=d3.select(this);r.attr("transform",function(e,r){var a=B.effectiveHeight()/B.dimension().group().all().length,n=t*a+.5*B.groupGap()*a;return"translate(0, "+n+")"}),c(r,t)}),g(t),h(t)}function c(e,t){var r=Array(),a=n();y.forEach(function(e,a){var n={};n.accessor=e.accessor,n.data=e.dimgroup.all()[t],r.push(n)});var i=e.selectAll("g."+_).data(r),l=i.enter();l.append("g").attr("class",function(e,t){return _+" _"+t}).on("click",f).append("rect").attr("class","row-bar").attr("width",0).attr("y",function(e,t){return a*(1+B.gap())*t}).attr("height",a).attr("fill",function(e,t){return B.colors()(t)})}function u(e){e.exit().remove()}function d(e){var t=m.selectAll("rect.row-bar").classed("deselected",function(e){return B.hasFilter()?!p(e):!1}).classed("selected",function(e){return B.hasFilter()?p(e):!1});dc.transition(t,B.transitionDuration()).attr("width",function(e){var t=b(b(0)==-(1/0)?1:0);return Math.abs(t-b(e.accessor(e.data)))})}function g(e){var t=n();B.renderLabel()&&e.append("text").attr("class",function(e,t){return _+" row-label _"+t}).attr("text-anchor","end").attr("x",-x).text(function(e){return B.label()(e)}),B.renderTitleLabel()&&t>=10&&e.selectAll("g.row").append("text").attr("class",function(e,t){return E+" _"+t}).text("0").attr("text-anchor","start").attr("data-prevvalue",function(e){return e.accessor(e.data)}).attr("x",x).on("click",function(){console.log(this)})}function h(){var e=B.selectAll(".row-group")[0],t=m.selectAll("g.row"),r=n();if(B.renderLabel()&&e.forEach(function(e,t){d3.select(e).selectAll(".row-label").attr("y",function(){var e=r/2*y.length+this.getBBox().height/2-2.5;return e})}),B.renderTitleLabel()&&r>=10){var i=t.select("text.value-label").text(function(e,t){return B.titleLabelFormatter()(e.accessor(e.data))});e.forEach(function(e,t){var a=d3.select(e).selectAll("g.row");a[0].forEach(function(e,t){var a=d3.select(e).select("text");a.attr("y",function(){return t*r*(1+w)+(r+this.getBBox().height)/2-2.5})})}),dc.transition(i,B.transitionDuration()).attr("x",function(e){var t=B.x()(B.valueAccessor()(e.data))+x;return t=d3.max([x,t]),t=d3.min([B.effectiveWidth()-a(y)-x,t])}).tween("text",function(e){var t,r,a;return t=d3.select(this).attr("data-prevvalue"),r=B.valueAccessor()(e.data),a=d3.interpolate(t,r),function(e){this.textContent=B.titleLabelFormatter()(a(e))}}).each("end",function(e){d3.select(this).attr("data-prevvalue",function(e){return e.accessor(e.data)})})}}function f(e){B.onClick(e.data)}function p(e){return B.hasFilter(B.cappedKeyAccessor(e.data))}var m,b,v,y,x=10,A=15,T=!1,S=2,w=.02,C=!1,D="row-group",_="row",E="value-label",M=!1,B=dc.multiGroupMixin(dc.capMixin(dc.marginMixin(dc.colorMixin(dc.baseMixin({}))))),F=d3.svg.axis().orient("bottom");return B.rowsCap=B.cap,B._titleLabelFormatter=function(e){return e},B._doRender=function(){return B.resetSvg(),m=B.svg().append("g").attr("transform","translate("+B.margins().left+","+B.margins().top+")"),o(),B},B.title(function(e){return B.cappedKeyAccessor(e)+": "+B.cappedValueAccessor(e)}),B.label(B.cappedKeyAccessor),B.x=function(e){return arguments.length?(b=e,B):b},B.renderTitleLabel=function(e){return arguments.length?(M=e,B):M},B.titleLabelFormatter=function(e){return arguments.length?(B._titleLabelFormatter=e,B):B._titleLabelFormatter},B._doRedraw=function(){return o(),B},B.xAxis=function(){return F},B.fixedBarHeight=function(e){return arguments.length?(C=e,B):C},B.fixedBarHeight=function(e){return arguments.length?(C=e,B):C},B.gap=function(e){return arguments.length?(w=e,B):w},B.elasticX=function(e){return arguments.length?(v=e,B):v},B.labelOffsetX=function(e){return arguments.length?(x=e,
B):x},B.labelOffsetY=function(e){return arguments.length?(A=e,B):A},B.labelCenterY=function(e){return arguments.length?(T=e,B):T},B.titleLabelOffsetX=function(e){return arguments.length?(S=e,B):S},B.anchor(e,t)}}),require.register("pieCharts",function(e,t,r){yearsPieChart.width(180).height(180).radius(80).dimension(yearDim).group(spendPerYear).label(function(e){var t=e.key;if(yearsPieChart.hasFilter()&&!yearsPieChart.hasFilter(e.key))return t+"(0%)";var r=d3.sum(spendPerYear.all(),function(e){return e.value});return r&&(t+="("+Math.floor(e.value/r*100)+"%)"),t}).on("filtered",function(e,t){updateAll()}),quarterPieChart.width(180).height(180).radius(80).dimension(quarterDim).group(spendPerQuarter).label(function(e){var t=e.key;if(quarterPieChart.hasFilter()&&!quarterPieChart.hasFilter(e.key))return t+"(0%)";var r=d3.sum(spendPerQuarter.all(),function(e){return e.value});return r&&(t+="("+Math.floor(e.value/r*100)+"%)"),t}).on("filtered",function(e,t){updateAll()}),lawsPieChart.width(180).height(180).radius(80).dimension(lawsDim).group(spendPerLaw).label(function(e){var t=e.key;if(lawsPieChart.hasFilter()&&!lawsPieChart.hasFilter(e.key))return t+"(0%)";var r=d3.sum(spendPerLaw.all(),function(e){return e.value});return r&&(t+="("+Math.floor(e.value/r*100)+"%)"),t}).on("filtered",function(e,t){updateAll()})}),require.register("tables",function(e,t,r){"use strict";var a=function(e){return"source"},n=ndxLinks.groupAll();legalCount.dimension(groupedLegalDim).group(n).html({some:"<strong>%total-count</strong> entries <span id='legalSearchReset'>| <a href=\"javascript:resetSearchBox($('#legalSearch'));\">reset</a></span> | <a href='javascript:combineLegalData();'>Combine data</a> | <a href='javascript:deleteData(legalDim);'>Remove data</a>"}),mediaCount.dimension(groupedMediaDim).group(n).html({some:"<strong>%total-count</strong> entries <span id='mediaSearchReset'>| <a href=\"javascript:resetSearchBox($('#mediaSearch'));updateAll();\">reset</a></span> | <a href='javascript:combineMediaData();'>Combine data</a> | <a href='javascript:deleteData(mediaDim);'>Remove data</a>"}),legalTable.dimension(groupedLegalDim).group(a).sortBy(tableSorting[legalTableSorting]).order(legalTableOrdering[legalTableSorting]).showGroups(!1).size(1/0).columns([function(e){return nodes[e.key]},function(e){return e.value.count},function(e){return formatEuro(e.value.total)}]).on("renderlet.d",function(e){var t=d3.scale.linear().domain([0,d3.max(groupedLegalDim.all(),function(e){return e.value.total})]).range(["0%","100%"]);e.selectAll("td._0").classed("text-left",!0),e.selectAll("td._1").classed("text-right",!0),e.selectAll("td._2").classed("text-right",!0).append("div").attr("class","inlinebar").style("width","0%").transition().duration(1e3).style("width",function(e){return t(Math.abs(e.value.total))})}),mediaTable.dimension(groupedMediaDim).group(a).showGroups(!1).sortBy(tableSorting[mediaTableSorting]).order(mediaTableOrdering[mediaTableSorting]).size(1/0).columns([function(e){return nodes[e.key]},function(e){return e.value.count},function(e){return formatEuro(e.value.total)}]).on("renderlet.d",function(e){var t=d3.scale.linear().domain([0,d3.max(groupedMediaDim.all(),function(e){return e.value.total})]).range(["0%","100%"]);e.selectAll("td._0").classed("text-left",!0),e.selectAll("td._1").classed("text-right",!0),e.selectAll("td._2").classed("text-right",!0).append("div").attr("class","inlinebar").style("width","0%").transition().duration(1e3).style("width",function(e){return t(Math.abs(e.value.total))})})}),require.register("treeMaps",function(e,t,r){}),require.register("views/charts",function(e,t,r){var a=function(e){var t=[];return t.push('<h1>Media Transperancy<br/><small>An Overview of Public Money spent on Media-Cooperations and -Funding in Austria</small></h1><div id="my-charts"></div><div id="my-bar-charts" class="row"><h2>Filter</h2><div id="time-bar-chart" class="col-sm-6"><strong>Years </strong><a href="javascript:timeBarChart.filterAll();updateAll();" style="display: none;" class="reset">reset</a><div class="clearfix"></div></div><div id="laws-bar-chart" class="col-sm-3"><strong>Legal Background </strong><a href="javascript:lawsBarChart.filterAll();updateAll();" style="display: none;" class="reset">reset</a><div class="clearfix"></div></div><div id="expenses-bar-chart" class="col-sm-3"><strong>Expenses</strong><a href="javascript:expensesBarChart.filterAll();updateAll();" style="display: none;" class="reset">reset</a><div class="clearfix">     </div></div></div><div id="my-tables" class="row"><div class="col-sm-3"><div class="row"><div class="span12"><form id="legalSearchForm" class="custom-search-form search-form form-horizontal pull-right"><div class="input-append span12"><input type="text" placeholder="Filter Rechtsträger" id="legalSearch" class="search-query mac-style"/><button class="btn"><span class="glyphicon glyphicon-search"></span></button></div></form></div></div><span id="data-count-legal"></span><div class="table-responsive"><table id="legal-table" class="table table-hover my-data-table"><thead><th data-col="a" class="data-table-col">Rechtsträger <button id="legalAlphabetOrder" class="btn"><span class="glyphicon glyphicon-sort-by-alphabet"></span></button></th><th data-col="b" class="data-table-col">Relationen <button id="legalRelationOrder" class="btn"><span class="glyphicon glyphicon-sort-by-order-alt"></span></button></th><th data-col="c" class="data-table-col">Summe <button id="legalSumOrder" class="btn"><span class="glyphicon glyphicon-sort-by-order">                 </span></button></th></thead></table></div></div><div class="col-sm-6"><strong>Chord Chart </strong><a href="javascript:legalDim3.filterAll();updateAll();" class="reset">reset</a><div class="clearfix"></div><div id="chord-chart"></div></div><div class="col-sm-3"><div class="row"><div class="span12"><form id="mediaSearchForm" class="custom-search-form search-form form-horizontal pull-right"><div class="input-append span12"><input type="text" placeholder="Filter Media" id="mediaSearch" class="search-query mac-style"/><button class="btn"><span class="glyphicon glyphicon-search"></span></button></div></form></div></div><span id="data-count-media"></span><div class="table-responsive"><table id="media-table" class="table table-hover my-data-table"><thead><th data-col="a" class="data-table-col">Media <button id="mediaAlphabetOrder" class="btn"><span class="glyphicon glyphicon-sort-by-alphabet"></span></button></th><th data-col="b" class="data-table-col">Relationen <button id="mediaRelationOrder" class="btn"><span class="glyphicon glyphicon-sort-by-order-alt"></span></button></th><th data-col="c" class="data-table-col">Summe <button id="mediaSumOrder" class="btn"><span class="glyphicon glyphicon-sort-by-order">       </span></button></th></thead></table></div></div></div><!--  .row#my-treeMaps--><!--    h2 Tree Maps--><!--    .col-sm-6--><!--      strong Rechtsträger--><!--      a(href="javascript:legalTreeMap.filterAll();updateAll();",style="display: none;").reset reset--><!--      .clearfix--><!--      #legal-tree-map  --><!--    .col-sm-6--><!--      strong Media--><!--      a(href="javascript:mediaTreeMap.filterAll();updateAll();",style="display: none;").reset reset--><!--      .clearfix--><!--      #media-tree-map        -->'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof r&&r&&r.exports&&(r.exports=a)}),require.register("views/nav",function(e,t,r){var a=function(e){var t=[];return t.push('<!-- Fixed navbar--><div role="navigation" class="navbar navbar-default navbar-fixed-top"><div class="container"><div class="navbar-header"><button type="button" data-toggle="collapse" data-target=".navbar-collapse" class="navbar-toggle"><span class="sr-only">Toggle navigation</span><span class="icon-bar"></span><span class="icon-bar"></span><span class="icon-bar"></span></button><a href="#" class="navbar-brand">Media Transperancy</a></div><div class="navbar-collapse collapse"><ul class="nav navbar-nav"><li class="active"><a href="#">Home</a></li><li><a href="#about">About</a></li><li><a href="#contact">Contact</a></li></ul></div><!-- /.nav-collapse--></div></div>'),t.join("")};"function"==typeof define&&define.amd?define([],function(){return a}):"object"==typeof r&&r&&r.exports&&(r.exports=a)});